#cloud-config

# Core packages for Debian
core-packages: &core-packages
  - apparmor-profiles
  - apparmor-utils
  - auditd
  - build-essential
  - config-package-dev
  - debhelper
  - devscripts
  - docker.io
  - golang-go
  - htop
  - just
  - libpam-apparmor
  - lintian
  - qemu-guest-agent
  - rsync
  - systemd-container
  - systemd-coredump
  - systemd-homed
  - systemd-oomd
  - unattended-upgrades
  - vim

gnome-packages: &gnome-packages
  # Core packages for Debian
  - apparmor-profiles
  - apparmor-utils
  - auditd
  - build-essential
  - config-package-dev
  - debhelper
  - devscripts
  - docker.io
  - golang-go
  - htop
  - just
  - libpam-apparmor
  - lintian
  - qemu-guest-agent
  - rsync
  - systemd-container
  - systemd-coredump
  - systemd-homed
  - systemd-oomd
  - unattended-upgrades
  - vim

  # Gnome packages for Debian
  - spice-vdagent
  - task-gnome-desktop
  - terminator
  - loupe
  - ptyxis

kde-packages: &kde-packages
  # Core packages for Debian
  - apparmor-profiles
  - apparmor-utils
  - auditd
  - build-essential
  - config-package-dev
  - debhelper
  - devscripts
  - docker.io
  - golang-go
  - htop
  - just
  - libpam-apparmor
  - lintian
  - qemu-guest-agent
  - rsync
  - systemd-container
  - systemd-coredump
  - systemd-homed
  - systemd-oomd
  - unattended-upgrades
  - vim

  # KDE packages for Debian
  - spice-vdagent
  - task-kde-desktop
  - plasma-workspace-wayland
  - terminator

desktop-runcmd: &desktop-runcmd
  # Enable auditd systemd socket
  - systemctl enable systemd-journald-audit.socket

  # Install the default kernel and remove the cloud one
  - apt install linux-image-amd64 linux-headers-amd64
  - apt remove --purge linux-image-$(uname -r)
  - apt autoremove --purge
  - update-grub
